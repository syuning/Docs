## Cloudbreak CLI 参考文档 (Cloudbreak CLI reference) 

在[安装和配置](cli-install.md)后,本节将帮助您开始使用Cloudbreak CLI。


### 命令结构 (Command structure)

CLI命令可以包含多个部分，第一部分是一组全局选项(global options)，下一部分是命令(command)，下一部分是一组命令选项(command options)和参数(arguments)，可以包含子命令(sub-commands)。

<pre>cb [global options] command [command options] [arguments...]</pre>


### 命令输出 (Command output)

您可以使用--output参数控制CLI的输出,可能的输出格式包括：

* JSON (`json`)
* YAML (`yaml`)
* 格式化表格 Formatted table (`table`)

例如：

<pre>cb cluster list --output json</pre>

<pre>cb clusters list --output yaml</pre>

<pre>cb cluster list --output table</pre>


### 命令 (Commands)

配置 CLI:  

* [配置](#configure)  


云供应商(CLoud Provider)：

* [云可用区 cloud availability-zones](#cloud-availability-zones)  
* [云区域 cloud regions](#cloud-regions)       
* [云容积 cloud volumes](#cloud-volumes)   
* [云实例 cloud instances](#cloud-instances)   
 
 
票据 (Credential):  

* [创建票据 credential create](#credential-create)   
* [删除票据 credential delete](#credential-delete)        
* [票据描述 credential describe](#credential-describe)        
* [票据列表 credential list](#credential-list)         
* [修改票据 credential modify](#credential-modify)   
 

蓝图 (Blueprint):   
       
* [创建蓝图 blueprint create](#blueprint-create)  
* [删除蓝图 blueprint delete](#blueprint-delete)           
* [描述蓝图 blueprint describe](#blueprint-describe)         
* [蓝图列表 blueprint list](#blueprint-list)           
 

集群 (Cluster): 
       
* [修改ambari密码 cluster change-ambari-password](#cluster-change-ambari-password)   
* [创建集群 cluster create](#cluster-create) 
* [删除集群 cluster delete](#cluster-delete)              
* [集群描述 cluster describe](#cluster-describe)    
* [生成集群模板 cluster generate-template](#cluster-generate-template)   
* [生成集群重新安装模板 cluster generate-reinstall-template](#cluster-generate-reinstall-template)  
* [集群列表 cluster list](#cluster-list)    
* [修复集群 cluster repair](#cluster-repair)    
* [重试集群 cluster retry](#cluster-retry)   
* [集群规模 cluster scale](#cluster-scale)        
* [启动集群 cluster start](#cluster-start)        
* [结束集群 cluster stop](#cluster-stop)              
* [同步集群 cluster sync](#cluster-sync) 


数据库 (Database):            

* [创建数据库 database create](#database-create)  
* [删除数据库 database delete](#database-delete)  
* [数据库列表 database list](#database-list)  
* [数据库测试 database test](#database-test)  


镜像目录 Image catalog

* [创建镜像目录 imagecatalog create](#imagecatalog-create)     
* [删除镜像目录 imagecatalog delete](#imagecatalog-delete) 
* [镜像 imagecatalog images](#imagecatalog-images)                      
* [镜像目录列表 imagecatalog list](#imagecatalog-list)  
* [设置默认值 imagecatalog set-default](#imagecatalog-set-default)            
    
       
轻量目录访问协议 LDAP:

* [创建 ldap create](#ldap-create)  
* [删除 ldap delete](#ldap-delete)  
* [列表 ldap list](#ldap-list)


Mpack (一个基于PHP的应对恶意程序的工具)

* [创建 mpack create](#mpack-create)  
* [删除 mpack delete](#mpack-delete)  
* [列表 mpack list](#mpack-list)


代理 Proxy:

* [创建代理 proxy create](#proxy-create)  
* [删除代理 proxy delete](#proxy-delete)  
* [代理列表 proxy list](#proxy-list)


配方 Recipe:  
       
* [创建配方 recipe create](#recipe-create)     
* [删除配方 recipe delete](#recipe-delete)            
* [描述配方 recipe describe](#recipe-describe)            
* [配方列表 recipe list](#recipe-list)              
       
       










__________________________________

#### blueprint create
#### 创建蓝图

从文件或URL添加新蓝图。

**子命令(Sub-commands)**

**`from-url`** 通过从URL位置下载蓝图来创建蓝图
**`from-file`** 通过从本地文件中读取蓝图来创建蓝图

**必要选项(equired options)**

**`from-url`** 

**`--name <value>`** 蓝图的名字  
**`--url <value>`** Ambari蓝图JSON文件的URL位置

**`from-file`** 

**`--name <value>`** 蓝图的名字  
**`--file <value>`** 本地计算机上的Ambari蓝图JSON文件的位置


**选项 (Options)**

**`--description <value>`**  关于此资源的描述 
**`--server <value>`**  Cloudbreak 服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名(邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak 密码 [$CB_PASSWORD]  
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  
**`--public`**   公共账户 Public in account  

**例 Examples**

自URL添加一个蓝图：

<pre>cb blueprint create from-url --url https://someurl.com/test.bp --name test1</pre>

自本地文件添加一个蓝图：

<pre>cb blueprint create from-file --file /Users/test/Documents/blueprints/test.bp --name test2</pre>


**相关链接Related links**

[使用自定义蓝图](blueprints.md)









__________________________________

#### blueprint delete
#### 删除蓝图

删除一个已存在的蓝图。

**必要选项 Required options**

**`--name <value>`** 蓝图名称 Blueprint name 

**选项 Options**

[comment]: <> (This also has "--output option", which I believe should not be there.)

**`--server <value>`**  Cloudbreak 服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak 密码 [$CB_PASSWORD]  
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括： oauth2, basic [$CB_AUTH_TYPE]  

**例 Examples**

<pre>cb blueprint delete --name "testbp"</pre>















__________________________________

#### blueprint describe
#### 蓝图描述

描述一个已存在的蓝图。

**必要选项 Required options**

**`--name <value>`** 蓝图名称 Blueprint name 

**选项 Options**

**`--output <value>`**  支持的格式： json, yaml, table (默认"json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括： oauth2, basic [$CB_AUTH_TYPE]  

**例 Examples**

<pre>cb blueprint describe --name "Data Science: Apache Spark 2.1, Apache Zeppelin 0.7.0"
{
  "Name": "Data Science: Apache Spark 2.1, Apache Zeppelin 0.7.0",
  "Description": "Data Science: Apache Spark 2.1, Apache Zeppelin 0.7.0",
  "HDPVersion": "2.6",
  "HostgroupCount": "3",
  "Tags": "DEFAULT"
}</pre>














__________________________________

#### blueprint list
#### 蓝图列表

列出可用蓝图。

**必要选项 Required options**

Nome

**选项 Options**

**`--output <value>`** 支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]   
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`** 要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**例 Examples**

<pre>cb blueprint list
[
  {
    "Name": "EDW-Analytics: Apache Hive 2 LLAP, Apache Zeppelin",
    "Description": "Useful for EDW analytics using Hive LLAP",
    "HDPVersion": "2.6",
    "HostgroupCount": "3",
    "Tags": "DEFAULT"
  },
  {
    "Name": "Data Science: Apache Spark 2, Apache Zeppelin",
    "Description": "Useful for data science with Spark and Zeppelin",
    "HDPVersion": "2.6",
    "HostgroupCount": "3",
    "Tags": "DEFAULT"
  },
  {
    "Name": "EDW-ETL: Apache Hive, Apache Spark 2",
    "Description": "Useful for ETL data processing with Hive and Spark",
    "HDPVersion": "2.6",
    "HostgroupCount": "3",
    "Tags": "DEFAULT"
  },
  {
    "Name": "Flow Management: Apache NiFi",
    "Description": "Useful for data-flow management with Apache NiFi",
    "HDPVersion": "3.1",
    "HostgroupCount": "2",
    "Tags": "DEFAULT"
  },
  {
    "Name": "my-hdf-test",
    "Description": "",
    "HDPVersion": "3.1",
    "HostgroupCount": "3",
    "Tags": "USER_MANAGED"
 }
]</pre>








__________________________________

#### cloud availability-zones
#### 云可用区域

Lists all availability zones available in the specified cloud provider region. 
列出指定云供应商区域(region)中可用的所有可用区域(availability zones)。

**必要选项 Required options**

**`--credential <value>`**  票据的名称 Name of the credential  
**`--region <value>`**   区域的名称 Name of the region  
   
**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]   
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**Examples**

Lists availability zones in the us-west-2 (Oregon) region on the AWS account identified by the credential called "aws-cred":
列出由名为“aws-cred”的票据标识的AWS账户上的us-west-2（Oregon）区域中的可用区域：

<pre>cb cloud availability-zones --credential aws-cred --region us-west-2
[
  {
    "Name": "us-west-2a"
  },
  {
    "Name": "us-west-2b"
  },
  {
    "Name": "us-west-2c"
  }
]</pre>


  
  
  
  
  
  
__________________________________

#### cloud regions  
#### 云区域

Lists the available cloud provider regions. 
列出可用的云供应商区域。

**必要选项 Required options**

**`--credential <value>`**  Name of the credential 票据的名称 
   
**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]   
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

Lists regions available on the AWS account identified by the credential called "aws-cred":
列出由名为“aws-cred”的票据标识的AWS账户上可用的区域：

<pre>cb cloud regions --credential aws-cred
[
  {
    "Name": "ap-northeast-1",
    "Description": "Asia Pacific (Tokyo)"
  },
  {
    "Name": "ap-northeast-2",
    "Description": "Asia Pacific (Seoul)"
  },
  ...</pre>





__________________________________     

#### cloud volumes
#### 云附加卷

Lists the available cloud provider volume types. 
列出可用的云供应商卷类型。

**子-命令 Sub-commands**

**`aws`**     Lists the available aws volume types 列出可用的aws卷类型
**`azure`**   Lists the available azure volume types 列出可用的azure卷类型
**`gcp`**     Lists the available gcp volume types 列出可用的gcp卷类型

**必要选项 Required options**

None
无
   
**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

Lists volumes available on AWS:
列出AWS上可用的卷：


<pre>cb cloud volumes aws
[
  {
    "Name": "ephemeral",
    "Description": "Ephemeral"
  },
  {
    "Name": "gp2",
    "Description": "General Purpose (SSD)"
  },
  {
    "Name": "st1",
    "Description": "Throughput Optimized HDD"
  },
  {
    "Name": "standard",
    "Description": "Magnetic"
  }
]</pre>





  
__________________________________ 

#### cloud instances 
#### 云实例
 
Lists the available cloud provider instance types.
列出可用的云供应商实例类型。

**必要选项 Required options**

**`--credential <value>`**  Name of the credential 票据的名称 
**`--region <value>`**   Name of the region 区域的名称 
  

**选项 Options**

**`--availability-zone <value>`** 可用区域(availability zone)的名称 
**`--output <value>`**  	支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  	选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]    

**例 Examples**

Lists instance types available in the us-west-2 (Oregon) region on the AWS account identified by the credential called "aws-cred":
列出由名为“aws-cred”的票据标识的AWS账户上的us-west-2（Oregon）区域中可用的实例类型：

<pre>cb cloud instances --credential aws-cred --region us-west-2

  {
    "Name": "c3.2xlarge",
    "Cpu": "8",
    "Memory": "15.0",
    "AvailabilityZone": "us-west-2b"
  },
  {
    "Name": "c3.4xlarge",
    "Cpu": "16",
    "Memory": "30.0",
    "AvailabilityZone": "us-west-2b"
  },
  ...</pre>






__________________________________

#### cluster change-ambari-password
#### 集群修改Ambari密码

修改Ambari密码。

**必要选项 Required options**

**`--name <value>`**  集群名称 
**`--old-password <value>`** 旧Ambari密码   
**`--new-password <value>`**  新Ambari密码    
**`--ambari-user <value>`**  Ambari用户   

**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]    

**例 Examples**

为名为“test1234”的集群更改名为“admin”的Ambari用户的密码：

<pre>cb cluster change-ambari-password --name test1234 --old-password 123456 --new-password Ambari123456 --ambari-user admin</pre>








__________________________________

#### cluster create 
#### 创建集群

基于JSON模板创建一个新的集群。

**必要选项 Required options**

**`--cli-input-json <value>`**  用户提供的JSON格式文件

**选项 Options**

**`--name <value>`**  集群的名称  
**`--description <value>`**  资源的描述   
**`--input-json-param-password <value>`**  集群和Ambari的密码   
**`--wait`**  等待操作结束，不需要任何参数    
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]   
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]     
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]    
**`--public`**   公共账户 Public in account  

**例 Examples**

在一个存储在/Users/test/Documents目录下的名为"mytemplate.json"的本地JSON文件内，创建一个名为"testcluster"的集群：

<pre>cb cluster create --name testcluster --cli-input-json /Users/test/Documents/mytemplate.json</pre>


**相关链接 Related links**  
[从UI获取集群JSON模板](cli-get-started.md#obtain-json-template-from-the-ui)   










__________________________________

#### cluster delete
#### 删除集群

删除一个已存在的集群。

**必要选项 Required options**

**`--name <value>`** 集群名称

**选项 Options**

**`--force`**  强制操作 Force the operation  
**`--wait`**  等待操作结束，不需要任何参数  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

<pre>cb cluster delete --name test1234</pre>











__________________________________

#### cluster describe 
#### 描述集群

描述一个已存在的集群。

**必要选项 Required options**

**`--name <value>`**  集群名称

**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]   
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

返回一个描述名为"test1234"的集群的JSON文件：

<pre>./cb cluster describe --name test1234</pre>

该命令返回JSON输出，该输出由于空间限制而未在示例中被捕获。










__________________________________

#### cluster generate-template
#### 集群生成模板

以JSON格式生成特定于云供应商的集群模板。

**子命令 Sub-commands**

**`aws new-network`** 使用新网络生成一个AWS集群JSON模板
**`aws existing-network`** 使用已有网络生成一个AWS集群JSON模板
**`aws existing-subnet`** 使用已有网络和子网生成一个AWS集群JSON模板

**`azure new-network`** 使用新网络生成一个Azure集群JSON模板
**`azure existing-subnet`** 使用已有网络和子网生成一个Azure集群JSON模板

**`gcp new-network`** 使用新网络生成一个GCP集群JSON模板
**`gcp existing-network`** 使用已有网络生成一个GCP集群JSON模板 
**`gcp existing-subnet`** 使用已有网络和子网生成一个GCP集群JSON模板
**`gcp legacy-network`** 使用延迟网络（不带子网）生成一个GCP集群JSON模板
 
**`openstack new-network`** 使用新网络生成一个OS集群JSON模板
**`openstack existing-network`** 使用已有网络生成一个OS集群JSON模板
**`openstack existing-subnet`** 使用已有网络和子网生成一个OS集群JSON模板

**例 Examples**

<pre>cb cluster generate-template aws new-network</pre>

**相关命令 Related Commands**

**相关链接 Related Links**  
[从UI获取集群JSON模板](cli-get-started.md#obtain-json-template-from-the-ui)   






__________________________________

#### cluster generate-reinstall-template
#### 集群 生成-重新安装-模板

生成一个集群模板，使你可以在安装过程失败的时候，重新安装集群。


**必要选项 Required options**

**`--blueprint-name <value>`**  蓝图的名称


**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

<pre>cb cluster generate-reinstall-template --blueprint-name "EDW-ETL: Apache Hive 1.2.1, Apache Spark 2.1"</pre>






__________________________________

#### cluster list
#### 集群列表

列出所有当前与Cloudbreak实例有关联的集群。


**必要选项 Required options**

None
无

**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**例 Examples**

列出可用的集群(available clusters)：

<pre>cb cluster list
[
  {
    "Name": "test1234",
    "Description": "",
    "CloudPlatform": "AZURE",
    "StackStatus": "UPDATE_IN_PROGRESS",
    "ClusterStatus": "REQUESTED"
  }
]</pre>

列出可用的集群(available clusters)，以table格式输出结果：

<pre>cb cluster list --output table
+----------+-------------+---------------+--------------------+---------------+
|   NAME   | DESCRIPTION | CLOUDPLATFORM |    STACKSTATUS     | CLUSTERSTATUS |
+----------+-------------+---------------+--------------------+---------------+
| test1234 |             | AZURE         | UPDATE_IN_PROGRESS | REQUESTED     |
+----------+-------------+---------------+--------------------+---------------+</pre>











__________________________________

#### cluster repair
#### 集群修复

如果集群安装失败，则通过删除或删除并替换故障节点来修复集群。 您必须指明失败的节点指定集群名称和主机组。

**必要选项 Required options**

**`--name <value>`**  集群名称
**`--host-groups <value>`** 以逗号分隔的主机组列表，其中应修复故障节点

**选项 Options**

**`--remove-only`** 安装失败的节点将会被删除（而不是通过删除并替换来”修复“）  
**`--wait`**  等待操作完成，不需要任何参数
**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT] 
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

<pre>cb cluster repair --name test1234 --host-groups master,worker</pre>










__________________________________

#### cluster retry
#### 重试集群

如果集群或堆栈设置失败，重试该过程。

**必要选项 Required options**

**`--name <value>`**  集群名称

**选项 Options**

**`--wait`**  等待操作完成，不需要任何参数  
**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT] 
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

<pre>cb cluster retry --name test1234</pre>









__________________________________

#### cluster scale
#### 集群伸缩

通过增加或删除节点来伸缩一个集群。

**必要选项 Required options**

**`--name <value>`**  节点名称  
**`--group-name <value>`**  要伸缩的组的名称 
**`--desired-node-count <value>`**  想要的节点数

**选项 Options**

**`--wait`**  等待操作完成，不需要任何参数   
**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

<pre>cb cluster scale --name test1234 --group-name worker --desired node-count 3</pre>






__________________________________

#### cluster start
#### 集群启动

启动先前已停止的集群。

**必要选项 Required options**

**`--name <value>`**  集群名称

**选项 Options**

**`--wait`**  等待操作完成，不需要任何参数  
**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   

**例 Examples**

<pre>cb cluster start --name test1234</pre>






__________________________________

#### cluster stop
#### 终止集群

终止一个集群。

**必要选项 Required options**

**`--name <value>`**  集群名称

**选项 Options**

**`--wait`**  等待操作完成，不需要任何参数 
**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**例 Examples**

<pre>cb cluster stop --name test1234</pre>







__________________________________

#### cluster sync
#### 集群同步

Synchronizes a cluster with the cloud provider.
使集群与云供应商同步。

**必要选项 Required options**

**`--name <value>`**  集群名称

**选项 Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  


**例 Examples**

<pre>cb cluster sync --name test1234</pre>








__________________________________

#### 配置 configure

配置用于与此服务器通信的Cloudbreak服务器地址和票据(credentials)。

**必要选项 Required options**

**`--server <value>`**  服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**	 用户名 (邮箱) [$CB_USER_NAME]  

**选项 Options**

**`--password <value>`**  密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]   
**`--output <value>`**  支持的格式包括：json, yaml, table (默认： "json") [$CB_OUT_FORMAT]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**例 Examples**

This example configures the server address with username and password:
此示例使用用户名和密码配置服务器地址：

<pre>cb configure --server https://ec2-11-111-111-11.compute-1.amazonaws.com --username admin@hortonworks.com --password MySecurePassword123</pre>

This example configures the server address with username but without a password:
此示例使用用户名配置服务器地址但没有密码：

<pre>cb configure --server https://ec2-11-111-111-11.compute-1.amazonaws.com --username admin@hortonworks.com</pre>


**相关链接 Related links**

[Configure CLI](cli-install.md#configure-the-cli)






__________________________________

#### credential create 
#### 创建票据

创建一个新的Cloudbreak票据。

**子命令 Sub-commands**

**`aws role-based`**  创建一个新的AWS票据  
**`aws key-based`**   创建一个新的AWS票据    
**`azure app-based`**  创建一个新的基于应用的(app-based)Azure票据 
**`gcp`** 创建一个新的gcp票据
**`openstack keystone-v2`** 创建一个新的OpenStack票据  
**`openstack keystone-v3`** 创建一个新的OpenStack票据   

**相关选项 Required options**

**`aws role-based`** 基于角色的

**`--name <value>`**  （票据的名称）
**`--role-arn <value>`** IAM Role ARN of the role used for Cloudbreak credential  

**`aws key-based`** （基于密钥的）

**`--name <value>`**  票据的名称  
**`--access-key <value>`**  AWS 存取键 Access Key  
**`--secret-key <value>`**  AWS 密钥 Secret Key  

**`azure app-based`** （基于应用的）

**`--name <value>`**  票据的名称    
**`--subscription-id <value>`**  Subscription ID from your Azure Subscriptions  
**`--tenant-id <value>`**  Directory ID from your Azure Active Directory > Properties      
**`--app-id <value>`**  Application ID of your app from your Azure Active Directory > App Registrations            
**`--app-password <value>`**  Your application key from app registration's Settings > Keys  

**`gcp`** 

**`--name <value>`**  Name for the credential    
**`--project-id <value>`**  Project ID from your GCP account                        
**`--service-account-id <value>`**  Your GCP Service account ID from IAM & Admin > Service accounts                 
**`--service-account-private-key-file <value>`**  P12 key from your GCP service account  

**`openstack keystone-v2`**  

**`--name <value>`**  Name for the credential    
**`--tenant-user <value>`**  OpenStack user name     
**`--tenant-password <value>`**  OpenStack password  
**`--tenant-name <value>`**  OpenStack tenant name      
**`--endpoint <value>`**   OpenStack endpoint   

**`openstack keystone-v3`** 

**`--name <value>`**  Name for the credential   
**`--tenant-user <value>`**  OpenStack user name     
**`--tenant-password <value>`**  OpenStack password  
**`--user-domain <value>`**  OpenStack user domain      
**`--endpoint <value>`**   OpenStack endpoint  


**Options**

**`--description <value>`**  资源的描述  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  
**`--public`**   Public in account  

Additionally, the following option is available for OpenStack Keystone2 and Keystone3:

**`--facing <value>`** API facing. One of: public, admin, internal

Additionally, the following options are available for OpenStack Keystone3:

**`--project-domain-name <value>`**  OpenStack project domain name    
**`--project-name <value>`**  OpenStack project name           
**`--domain-name <value>`**  OpenStack domain name    
**`--keystone-scope <value>`** OpenStack keystone scope. One of: default, domain, project   


**Examples**

Creates a role-based credential on AWS:

<pre>cb credential create aws role-based --name my-credential1 --role-arn arn:aws:iam::517127065441:role/CredentialRole</pre>

Creates a key-based credential on AWS:

<pre>cb credential create aws key-based --name my-credential2 --access-key ABDVIRDFV3K4HLJ45SKA --secret-key D89L5pOPM+426Rtj3curKzJEJL3lYoNcP8GvguBV</pre>

Creates an app-based credential on Azure:

<pre>cb credential create azure app-based --name my-credential3 --subscription-id b8e7379e-568g-55d3-na82-45b8d421e998 --tenant-id  c79n5399-3231-65ba-8dgg-2g4e2a40085e --app-id 6d147d89-48d2-5de2-eef8-b89775bbfcg1 --app-password 4a8hBgfI52s/C8R5Sea2YHGnBFrD3fRONfdG8w7F2Ua=</pre>

Creates a credential on Google Cloud:

<pre>cb credential create gcp --name my-credential4 --project-id test-proj --service-account-id test@test-proj.iam.gserviceaccount.com --service-account-private-key-file /Users/test/3fff57a6f68e.p12</pre>


Creates a role-based credential on OpenStack with Keystone-v2:

<pre>cb credential create openstack keystone-v2 --name my-credential5 --tenant-user test --tenant-password MySecurePass123 --tenant-name test --endpoint http://openstack.test.organization.com:5000/v2.0</pre>


**Related links**  

[Create Credential on AWS](aws-launch.md#create-credential)  
[Create Credential on Azure](azure-launch.md#create-credential)  
[Create Credential on GCP](gcp-launch.md#create-credential)  
[Create Credential on OpenStack](os-launch.md#create-credential)  







__________________________________

#### credential delete

Deletes an existing Cloudbreak credential.

**Required options**

**`--name <value>`**  Credential name 

**Options**

**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括： oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

<pre>cb credential delete --name test-cred</pre>







__________________________________

#### credential describe

Describes an existing credential.

**Required options**

**`--name <value>`**  Credential name 

**Options**
  
**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]    
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括： oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

<pre>cb credential describe --name testcred
{
  "Name": "testcred",
  "Description": "",
  "CloudPlatform": "AZURE"
}</pre>











__________________________________

#### credential list

Lists existing Cloudbreak credentials.

**Required options**

None

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`** 要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

Lists credentials:

<pre>cb credential list 
[
  {
    "Name": "testcred",
    "Description": "",
    "CloudPlatform": "AZURE"
  }
]
</pre>

Lists credentials, with output formatted in a table format:

<pre>cb credential list --output table
+---------+-------------+---------------+
|  NAME   | DESCRIPTION | CLOUDPLATFORM |
+---------+-------------+---------------+
| armcred |             | AZURE         |
+---------+-------------+---------------+</pre>












__________________________________

#### credential modify 

Modifies an existing Cloudbreak credential. 

> The `--name` parameter is used to identify the credential that is being modified, and therefore its value cannot be modified.    


**Sub-commands**

**`aws role-based`**  Modifies an AWS role-based credential  
**`aws key-based`**  Modifies an AWS key-based credential  
**`azure app-based`** Modifies an app-based Azure credential  
**`gcp`** Modifies a Google Cloud credential  
**`openstack keystone-v2`** Modifies an OpenStack v2 credential  
**`openstack keystone-v3`** Modifies an  OpenStack v3 credential 

**Required options**

**`aws role-based`** 

**`--name <value>`**  Credential name  
**`--role-arn <value>`** IAM Role ARN of the role used for Cloudbreak credential  

**`aws key-based`** 

**`--name <value>`**  Credential name  
**`--access-key <value>`**  AWS Access Key  
**`--secret-key <value>`**  AWS Secret Key  

**`azure app-based`** 

**`--name <value>`**  Credential name  
**`--subscription-id <value>`**  Subscription ID from your Azure Subscriptions  
**`--tenant-id <value>`**  Directory ID from your Azure Active Directory > Properties      
**`--app-id <value>`**  Application ID of your app from your Azure Active Directory > App Registrations            
**`--app-password <value>`**  Your application key from app registration's Settings > Keys  

**`gcp`** 

**`--name <value>`**  Credential name   
**`--project-id <value>`**  Project ID from your GCP account                        
**`--service-account-id <value>`**  Your GCP Service account ID from IAM & Admin > Service accounts                 
**`--service-account-private-key-file <value>`**  P12 key from your GCP service account  

**`openstack keystone-v2`**  

**`--name <value>`**  Credential name  
**`--tenant-user <value>`**  OpenStack user name     
**`--tenant-password <value>`**  OpenStack password  
**`--tenant-name <value>`**  OpenStack tenant name      
**`--endpoint <value>`**   OpenStack endpoint   

**`openstack keystone-v3`** 

**`--name <value>`**  Credential name  
**`--tenant-user <value>`**  OpenStack user name     
**`--tenant-password <value>`**  OpenStack password  
**`--user-domain <value>`**  OpenStack user domain      
**`--endpoint <value>`**   OpenStack endpoint  


**Options**

**`--description <value>`**  资源的描述  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`** 选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]    

Additionally, the following option is available for OpenStack Keystone2 and Keystone3:

**`--facing <value>`** API facing. One of: public, admin, internal

Additionally, the following options are available for OpenStack Keystone3:

**`--project-domain-name <value>`**  OpenStack project domain name    
**`--project-name <value>`**  OpenStack project name           
**`--domain-name <value>`**  OpenStack domain name    
**`--keystone-scope <value>`** OpenStack keystone scope. One of: default, domain, project  


**Examples**

Modifies a role-based AWS credential:

<pre>cb credential modify aws role-based --name my-credential1 --role-arn arn:aws:iam::517127065441:role/CredentialRole</pre>

Modifies a key-based AWS credential:

<pre>cb credential modify aws key-based --name my-credential2 --access-key ABDVIRDFV3K4HLJ45SKA --secret-key D89L5pOPM+426Rtj3curKzJEJL3lYoNcP8GvguBV</pre>

Modifies an app-based Azure credential:

<pre>cb credential modify azure app-based --name my-credential3 --subscription-id b8e7379e-568g-55d3-na82-45b8d421e998 --tenant-id  c79n5399-3231-65ba-8dgg-2g4e2a40085e --app-id 6d147d89-48d2-5de2-eef8-b89775bbfcg1 --app-password 4a8hBgfI52s/C8R5Sea2YHGnBFrD3fRONfdG8w7F2Ua=</pre>

Modifies a Google Cloud credential:

<pre>cb credential modify gcp --name my-credential4 --project-id test-proj --service-account-id test@test-proj.iam.gserviceaccount.com --service-account-private-key-file /Users/test/3fff57a6f68e.p12</pre>


Modifies a role-based OpenStack credential which uses Keystone-v2:

<pre>cb credential modify openstack keystone-v2 --name my-credential5 --tenant-user test --tenant-password MySecurePass123 --tenant-name test --endpoint http://openstack.test.organization.com:5000/v2.0</pre>










__________________________________

#### database create

Registers an existing external database with Cloudbreak.

**Sub-commands**  

**`mysql`**  Registers a MySQL database configuration  
**`oracle11`**  Registers an Oracle 11 database configuration  
**`oracle12`**  Registers an Oracle 12 database configuration  
**`postgres`**  Registers a Postgres database configuration  

 

**Required options**

**`--name <value>`**   Name for the database     
**`--db-username <value>`**  Username for the JDBC connection  
**`--db-password <value>`**  Password for the JDBC connection  
**`--url <value>`**  JDBC connection URL in the form of jdbc:db-type://address:port/db  
**`--type <value>`**   Name if the service that will use the database (AMBARI, DRUID, HIVE, OOZIE, RANGER, SUPERSET, or other custom type)    

If using MySQL and Oracle, the **`--connector-jar-url value <value>`** parameter is required in all cases except the following: If you are using a custom image and you already placed the JAR file on the machine, then this parameter is not required.


**Options**

**`--description <value>`**  数据库的描述       
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]   
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]   
**`--public`**   公共账户 Public in account  


**Examples**

Registers an existing Postgres database called "test-postgres" with Cloudbreak:

<pre>cb database create postgres --name testpostgres  --type HIVE --url jdbc:postgresql://test-db.cic6nusrpqec.us-west-2.rds.amazonaws.com:5432/testdb --db-username testuser --db-password MySecurePassword123</pre>

The connection URL includes three components db-type://address:port/db: 

* Database type "jdbc:postgresql"  
* Endpoint "test-db.cic6nusrpqec.us-west-2.rds.amazonaws.com:5432"  
* Port "5432"  
* Database name "testdb"  

Registers an existing MySQL database called "testmysql" with Cloudbreak:  

<pre>cb database create mysql --name testmysql --type OOZIE --url jdbc:mysql://test-db.cic6nusrpqec.us-west-2.rds.amazonaws.com:5432/testdb  --db-username test --db-password test --connector-jar-url http://example-page/driver-file.JAR</pre> 
  







__________________________________
 
#### database delete

Unregisters a previously registered database with Cloudbreak. It does not delete the database instance. 

**Required options**

**`--name <value>`**  Database registration name     

**Options**

**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

<pre>cb database delete --name testdatabase</pre>















__________________________________

#### database list

Lists all available database registrations.

**Required options**

None

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

Lists existing database registrations:

<pre>cb database list</pre>

Lists existing database registrations, with output presented in a table format:

<pre>cb database list --output table</pre>















__________________________________

#### database test

Test database connection.

 
**Sub-commands**  


**`by-name`**    Tests a stored database configuration identified by its name  
**`by-params`**  Tests database connection parameters   

**Required options**  

**`by-name`**  

**`--name <value>`**  Database registration name    

**`by-params`**  

**`--db-username <value>`**  Username to use for the JDBC connection  
**`--db-password <value>`**  Password to use for the JDBC connection  
**`--url <value>`**  JDBC connection URL in the form of jdbc:db-type://address:port/db  
**`--type <value>`**  Type of database (the service name that will use the database  

**Options**

**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

Tests connection to a previously registered database called "testpostgres":

<pre>database test --name testpostgres</pre>

Tests connection to a database based on connection parameters provided: 

<pre>cb database test by-params --type HIVE --url jdbc:postgresql://test-db.cic6nusrpqec.us-west-2.rds.amazonaws.com:5432/testdb --db-username testuser --db-password MySecurePassword123</pre> 









__________________________________

#### imagecatalog create   

Registers a new custom image catalog based on the URL provided.  


**Required options**  

**`--name <value>`**  Name for the image catalog  
**`--url <value>`**   URL location of the image catalog JSON file  

**Options**

**`--description <value>`**  Description for the recipe   
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  
**`--public`**   公共账户 Public in account  

**Examples**

Registers an image catalog called "mycustomcatalog" which is available at https://example.com/myimagecatalog.json: 

<pre>cb imagecatalog create --name mycustomcatalog --url https://example.com/myimagecatalog.json</pre> 

**Related links**  

[Custom Images](images.md)   








__________________________________ 

#### imagecatalog delete

Deletes a previously registered custom image catalog. It does not delete any cloud provider resources that you created as a prerequisite for creating the Cloudbreak credential.    

**Required options**  

**`--name <value>`**  Image catalog name    

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

Deletes an image catalog called "mycustomcatalog":

<pre>cb imagecatalog delete --name mycustomcatalog</pre> 

**Related links**  

[Custom Images](images.md)  










__________________________________

#### imagecatalog images 

Lists images from the specified image catalog available for the specified cloud provider.   

**Sub-commands**  

**`aws`**         Lists available aws images     
**`azure`**       Lists available azure images     
**`gcp`**         Lists available gcp images    
**`openstack`**   Lists available openstack images    


**Required options**

**`--imagecatalog <value>`**  Name of the imagecatalog     

   
**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]    
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]     
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**  

Returns date, description, Ambari version, and image ID for all AWS images from an image catalog called "myimagecatalog":

<pre>./cb imagecatalog images aws --imagecatalog cloudbreak-default
[
  {
    "Date": "2017-10-13",
    "Description": "Cloudbreak official base image",
    "Version": "2.6.0.0",
    "ImageID": "44b140a4-bd0b-457d-b174-e988bee3ca47"
  },
  {
    "Date": "2017-11-16",
    "Description": "Official Cloudbreak image",
    "Version": "2.6.0.0",
    "ImageID": "3c7598a4-ebd6-4a02-5638-882f5c7f7add"
  }
]</pre>


**Related links**  

[Custom Images](images.md)  











__________________________________  
               
#### imagecatalog list 

Lists default and custom image catalogs registered with Cloudbreak instance.   

**Required options**  

None  

**Options**  

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]   
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

Lists existing image catalogs:  

<pre>cb  imagecatalog list 
[
  {
    "Name": "mycustomcatalog",
    "Default": false,
    "URL": "https://example.com/imagecatalog.json"
  },
  {
    "Name": "cloudbreak-default",
    "Default": true,
    "URL": "https://s3-eu-west-1.amazonaws.com/cloudbreak-info/v2-dev-cb-image-catalog.json"
  }
]</pre>


**Related links**  

[Custom Images](images.md)  









__________________________________

#### imagecatalog set-default

Sets the specified image catalog as default.  

**Required options**   

**`--name <value>`**  Image catalog name     

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`** Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]    
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

Sets "mycustomcatalog" as default:  

<pre>imagecatalog set-default --name mycustomcatalog</pre>

**Related links**  

[Custom Images](images.md)  












__________________________________

#### ldap create

Registers an existing LDAP with Cloudbreak.
 

**Required options**

**`--name <value>`**  Name for the LDAP       
**`--ldap-server <value>`**  Address of the LDAP server (e.g. ldap://10.0.0.1:384)  
**`--ldap-domain <value>`**   LDAP domain (e.g. ad.cb.com)  
**`--ldap-bind-dn <value>`**  LDAP bind DN (e.g. CN=Administrator,CN=Users,DC=ad,DC=cb,DC=com)  
**`--ldap-bind-password <value>`**  LDAP bind password  
**`--ldap-directory-type <value>`**   LDAP directory type (LDAP or ACTIVE_DIRECTORY)   
**`--ldap-user-search-base <value>`**   LDAP user search base (e.g. CN=Users,DC=ad,DC=cb,DC=com)  
**`--ldap-user-name-attribute <value>`**   LDAP user name attribute  
**`--ldap-user-object-class <value>`**   LDAP user object class  
**`--ldap-group-member-attribute <value>`** LDAP group member attribute  
**`--ldap-group-name-attribute <value>`**  LDAP group name attribute  
**`--ldap-group-object-class <value>`**  LDAP group object class  
**`--ldap-group-search-base <value>`**   LDAP group search base (e.g. OU=scopes,DC=ad,DC=cb,DC=com)  

**Options**

**`--ldap-admin-group <value>`**  LDAP group of administrators  
**`--description <value>`**  Description for the LDAP      
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]   
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  
**`--public`**   Public in account  











__________________________________
 
#### ldap delete

Deletes selected LDAP registration from Cloudbreak. It does not delete the LDAP. 

**Required options**

**`--name <value>`**  LDAP name      

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

<pre>cb ldap delete --name testldap</pre>















__________________________________

#### ldap list

Lists all available LDAPs.

**Required options**

None

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

Lists existing LDAPs:

<pre>cb ldap list</pre>

Lists existing LDAPs, with output presented in a table format:

<pre>cb ldap list --output table</pre>












__________________________________

#### mpack create

Registers an existing management pack with Cloudbreak.
 

**Required options**

**`--name <value>`**  Name for the mpack        
**`--url <value>`**  URL that points to the location of the mpack tarball   

**Options**

**`--purge`**  Purge existing resources specified in purge-list   
**`--purge-list <value>`**  Comma-separated list of resources to purge (stack-definitions,service-definitions,mpacks). By default (stack-definitions,mpacks) will be purged  
**`--force`**  Force install management pack    
**`--description <value>`**  Description for the LDAP      
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]   
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  
**`--public`**   Public in account  

**Examples**

Registers a new mpack without purging:

<pre>cb mpack create --name test-hdp-search --url http://public-repo-1.hortonworks.com/HDP-SOLR/hdp-solr-ambari-mp/solr-service-mpack-3.0.0.tar.gz</pre>









__________________________________
 
#### mpack delete

Deletes selected management registration from Cloudbreak. It does not delete the management pack. 

**Required options**

**`--name <value>`**  Management pack name      

**Options**

**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

<pre>cb mpack delete --name testmpack</pre>















__________________________________

#### mpack list

Lists all available management packs.

**Required options**

None

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

Lists all currently registered management packs and provides information about each:

<pre>cb mpack list
[
  {
    "Name": "hdp-search-3",
    "Description": "",
    "URL": "http://public-repo-1.hortonworks.com/HDP-SOLR/hdp-solr-ambari-mp/solr-service-mpack-3.0.0.tar.gz",
    "Purge": "false",
    "PurgeList": "",
    "Force": "false"
  }
]</pre>

























__________________________________

#### proxy create

Registers an existing proxy with Cloudbreak.
 

**Required options**

**`--name <value>`**  代理的名称    
**`--proxy-host <value>`**  代理的主机名(Hostname)或IP地址
**`--proxy-port <value>`**  代理的端口  

**Options**

**`--proxy-protocol <value>`**  代理的协议(http or https)(默认："http") Protocol for the proxy (http or https) (default: "http") 
**`--proxy-user <value>`**   代理的用户（若要求basic auth）User for the proxy if basic auth is required  
**`--proxy-password <value>`**  代理密码（若要求basic auth）Password for the proxy if basic auth is required  
**`--description <value>`**  代理的描述      
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]   
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  
**`--public`**   Public in account  











__________________________________
 
#### proxy delete

Unregisters a previously registered proxy with Cloudbreak. It does not delete the proxy. 

**Required options**

**`--name <value>`**  Proxy registration name     

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

<pre>cb proxy delete --name testproxy</pre>















__________________________________

#### proxy list

Lists all proxies that were previously registered with Cloudbreak.

**Required options**

None

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]

**Examples**

Lists existing proxy registrations:

<pre>cb proxy list</pre>

Lists existing proxy registrations, with output presented in a table format:

<pre>cb proxy list --output table</pre>














__________________________________

#### recipe create

Adds a new recipe from a file or from a URL.

**Sub-commands**

**`from-url`**  Creates a recipe by downloading it from a URL location  
**`from-file`**  Creates a recipe by reading it from a local file  

**Required options**

**`from-url`**  

**`--name <value>`**  Name for the recipe   
**`--execution-type <value>`**  Type of execution [pre-ambari-start, pre-termination, post-ambari-start, post-cluster-install]    
**`--url <value>`**  URL location of the Ambari blueprint JSON file  

  
**`from-file`** 

**`--name <value>`**  Name for the recipe  
**`--execution-type <value>`**  Type of execution [pre-ambari-start, pre-termination, post-ambari-start, post-cluster-install]   
**`--file <value>`**  Location of the Ambari blueprint JSON file  

**Options**

**`--description <value>`**  配方的描述   
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  
**`--public`**   公共账户 Public in account  

**Examples**


Adds a new recipe called "test1" from a URL:

<pre>cb recipe create from-url --name "test1" --execution-type post-ambari-start --url http://some-site.com/test.sh</pre>

Adds a new recipe called "test2" from a file:

<pre>cb recipe create from-url --name "test2" --execution-type post-ambari-start --file /Users/test/Documents/test.sh</pre>

**Related links**

[Recipes](recipes.md)







__________________________________
 
#### recipe delete

Deletes an existing recipe.

**Required options**

**`--name <value>`**  Recipe name  

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]   
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

<pre>cb recipe delete --name test</pre>










__________________________________

#### recipe describe

Describes an existing recipe.

**Required options**

**`--name <value>`**  Recipe name     

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认："json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak 密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  


**Examples**

Describes a recipe called "test":

<pre>cb recipe describe --name test
{
  "Name": "test",
  "Description": "",
  "ExecutionType": "POST"
}</pre>

Describes a recipe called "test", with output presented in a table format:

<pre>cb describe-recipe --name test --output table
+------+-------------+----------------+
| NAME | DESCRIPTION | EXECUTION TYPE |
+------+-------------+----------------+
| test |             | POST           |
+------+-------------+----------------+</pre>











__________________________________

#### recipe list

Lists all available recipes.

**Required options**

None

**Options**

**`--output <value>`**  支持的格式：json, yaml, table (默认"json") [$CB_OUT_FORMAT]  
**`--server <value>`**  Cloudbreak服务器地址 [$CB_SERVER_ADDRESS]  
**`--username <value>`**  Cloudbreak 用户名 (邮箱) [$CB_USER_NAME]  
**`--password <value>`**  Cloudbreak 密码 [$CB_PASSWORD]  
**`--profile <value>`**  选择要使用的配置文件 [$CB_PROFILE]  
**`--auth-type <value>`**  要使用的身份认证方法，值包括：oauth2, basic [$CB_AUTH_TYPE]  

**Examples**

Lists existing recipes:

<pre>cb recipe list
[
  {
    "Name": "test",
    "Description": "",
    "ExecutionType": "POST"
  }
]</pre>

Lists existing recipes, with output presented in a table format:

<pre>cb recipe list --output table
+------+-------------+-------------------+
| NAME | DESCRIPTION | EXECUTION TYPE    |
+------+-------------+-------------------+
| test |             | POST-AMBARI-START |
+------+-------------+-------------------+
</pre>









__________________________________

### Debugging

To use debugging mode, pass the `--debug` option. 


### Checking CLI Version

To check CLI version, use `cb --version`.







