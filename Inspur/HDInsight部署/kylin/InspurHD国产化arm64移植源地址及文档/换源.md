1.更换jar包
2.打包.deb
3.生成Packages.gz，解压生成Packages
4.生成Release

# 1. 更换data-space-1.4.5-RELEASE.jar，生成.deb文件，copy到22源上
```bash
cd /bigdata/kylin-kord/dataspace

tree .

find . -name data-space-1.4.5-RELEASE.jar
换jar包

cd /bigdata/kylin-kord/dataspace/build
rm -rf dataspace_1.4.0_all.deb

生成.deb包 dpkg-deb -b
root@master1:/bigdata/kylin-kord/dataspace# dpkg-deb -b extract/ build/
dpkg-deb：正在新建软件包 dataspace，包文件为 build//dataspace_1.4.0_all.deb。

# scp到22源上
root@master1:/bigdata/kylin-kord/dataspace/build# scp dataspace_1.4.0_all.deb 10.221.129.22:/opt/mnt/www/html/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/pool/main/d/dataspace

```

# 2. .deb重新生成后，生成Packages.gz和Packages，copy到22源上
```bash

    Packages.gz文件
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78# apt-ftparchive packages pool | gzip -9c > dists/HDP/main/binary-arm64/Packages.gz

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64# scp Packages.gz 10.221.129.22:/opt/mnt/www/html/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64
root@10.221.129.22's password: 
Packages.gz                                                                                     100%   51KB   1.5MB/s   00:00 

'''

    Packages文件
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64# gunzip -k Packages.gz
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64# ll
总用量 228
drwxr-xr-x 2 root root   4096 9月   3 11:15 ./
drwxr-xr-x 4 root root   4096 7月  19 14:19 ../
-rw-r--r-- 1 root root 164789 9月   3 11:12 Packages
-rw-r--r-- 1 root root  52250 9月   3 11:12 Packages.gz
-rw-r--r-- 1 root root     90 7月  19 14:17 Release

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64# scp Packages 10.221.129.22:/opt/mnt/www/html/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64
root@10.221.129.22's password: 
Packages                                                                                        100%  161KB   3.1MB/s   00:00    
```



# 3. 更新/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64的Release文件，copy到22源上
```bash
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64# apt-ftparchive release ./ > Release

gpg -abs --default-key BF5914CF -o Release.gpg Release
gpg --clearsign --default-key BF5914CF -o InRelease Release
密码: inspur@17

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64# scp Release 10.221.129.22:/opt/mnt/www/html/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP/main/binary-arm64
root@10.221.129.22's password: 
Release                                                                                         100% 1202   102.7KB/s   00:00  
```




# 4. 更新kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP下的Release、InRelease、Release.gpg，copy到22源上
```bash
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# apt-ftparchive release ./ > Release
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# ll
总用量 48
drwxr-xr-x 4 root root 4096 9月   3 16:48 ./
drwxr-xr-x 3 root root 4096 7月  19 14:07 ../
drwxr-xr-x 5 root root 4096 7月  19 14:07 contrib/
-rw-rw-r-- 1 root root 6804 8月   8 12:37 InRelease.1
drwxr-xr-x 4 root root 4096 7月  19 14:19 main/
-rw-r--r-- 1 root root  473 7月  19 14:19 n
-rw-rw-r-- 1 root root 6282 9月   3 16:48 Release
-rw-rw-r-- 1 root root 6282 8月   8 12:37 Release.1
-rw-rw-r-- 1 root root  473 8月   8 12:37 Release.gpg.1
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# gpg -abs --default-key BF5914CF -o Release.gpg Release
gpg: 警告：配置文件‘/root/.gnupg/gpg.conf’权限不安全
gpg: 警告：配置文件‘/root/.gnupg/gpg.conf’的关闭目录权限不安全

您需要输入密码，才能解开这个用户的私钥：“Inspur HD Manager Signing Key (浪潮云大数据平台管理器) <yuanxiaolong@inspur.com>”
2048 位的 RSA 密钥，钥匙号 BF5914CF，建立于 2019-07-17

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# ll
总用量 52
drwxr-xr-x 4 root root 4096 9月   3 16:48 ./
drwxr-xr-x 3 root root 4096 7月  19 14:07 ../
drwxr-xr-x 5 root root 4096 7月  19 14:07 contrib/
-rw-rw-r-- 1 root root 6804 8月   8 12:37 InRelease.1
drwxr-xr-x 4 root root 4096 7月  19 14:19 main/
-rw-r--r-- 1 root root  473 7月  19 14:19 n
-rw-rw-r-- 1 root root 6282 9月   3 16:48 Release
-rw-rw-r-- 1 root root 6282 8月   8 12:37 Release.1
-rw-rw-r-- 1 root root  473 9月   3 16:48 Release.gpg
-rw-rw-r-- 1 root root  473 8月   8 12:37 Release.gpg.1
root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# gpg --clearsign --default-key BF5914CF -o InRelease Release
gpg: 警告：配置文件‘/root/.gnupg/gpg.conf’权限不安全
gpg: 警告：配置文件‘/root/.gnupg/gpg.conf’的关闭目录权限不安全

您需要输入密码，才能解开这个用户的私钥：“Inspur HD Manager Signing Key (浪潮云大数据平台管理器) <yuanxiaolong@inspur.com>”
2048 位的 RSA 密钥，钥匙号 BF5914CF，建立于 2019-07-17

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# ll
总用量 60
drwxr-xr-x 4 root root 4096 9月   3 16:49 ./
drwxr-xr-x 3 root root 4096 7月  19 14:07 ../
drwxr-xr-x 5 root root 4096 7月  19 14:07 contrib/
-rw-rw-r-- 1 root root 6804 9月   3 16:49 InRelease
-rw-rw-r-- 1 root root 6804 8月   8 12:37 InRelease.1
drwxr-xr-x 4 root root 4096 7月  19 14:19 main/
-rw-r--r-- 1 root root  473 7月  19 14:19 n
-rw-rw-r-- 1 root root 6282 9月   3 16:48 Release
-rw-rw-r-- 1 root root 6282 8月   8 12:37 Release.1
-rw-rw-r-- 1 root root  473 9月   3 16:48 Release.gpg
-rw-rw-r-- 1 root root  473 8月   8 12:37 Release.gpg.1

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# scp Release 10.221.129.22:/opt/mnt/www/html/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP
root@10.221.129.22's password: 
Release                                                                                         100% 6282   524.4KB/s   00:00

'''

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# scp InRelease 10.221.129.22:/opt/mnt/www/html/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP
root@10.221.129.22's password: 
InRelease                                                                                       100% 6804   566.4KB/s   00:00    

'''

root@master1:/var/www/html/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP# scp Release.gpg 10.221.129.22:/opt/mnt/www/html/kylin-arm64/hortonworks/HDP/kylin4/3.1.0.0-78/dists/HDP
root@10.221.129.22's password: 
Release.gpg                                                                                     100%  473    41.4KB/s   00:00 

``` 

