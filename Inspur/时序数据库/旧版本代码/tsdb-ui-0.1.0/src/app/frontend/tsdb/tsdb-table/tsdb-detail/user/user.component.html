<nz-alert nzType="info" nzBanner nzShowIcon="false" [nzDescription]='innerTemplate' [ngStyle]="{ 'marginBottom': '11px' }">
  <ng-template #innerTemplate>
    温馨提示：此处的用户是指当前时序数据库的用户，假设列表中存在用户A，即可以用户A的身份信息来访问当前时序数据库。用户角色是指此用户所属的角色，角色定义：数据源角色拥有写入数据点的权限；应用角色拥有写入以及读取数据点的权限；管理角色拥有写入、读取数据以及新建、修改、删除用户的权限。
    <a (click)="navToDocumentPage()" >操作指南</a>
  </ng-template>
</nz-alert>

<!-- <app-user-form #userForm (refresh)="getUserList()"></app-user-form> -->

<div class="table-top table-operations clearfix">
  <div class="pull-left">
    <button (click)="addUserModal()" nz-button nzType="primary" class="btn-add"><i class="fas fa-plus"></i>新建用户</button>
  </div>
  <div class="pull-right">
    <nz-input-group style="width: 220px;" nzSearch [nzSuffix]="suffixIconButton">
      <input [(ngModel)]="username" name="name" [nzSize]="'default'" (keyup)="onKey($event)" nz-input placeholder="用户名称">
    </nz-input-group>
    <ng-template #suffixIconButton>
      <button nz-button nzSearch (click)="searchUserList()" nz-popover [nzContent]="'搜索'">
        <i class="anticon anticon-search"></i>
      </button>
    </ng-template>
    <button nz-button (click)="getUserList()" style="top: -1px; margin-top: -1px" nz-popover [nzContent]="'刷新'">
        <i class="anticon anticon-reload"></i>
      </button>
  </div>
</div>

<nz-table #nzTable [nzData]="userList" [nzLoading]="loading" [nzShowSizeChanger]="true" nzBordered [nzShowPagination]="userList.length > 9">
  <thead>
    <tr>
      <th [nzWidth]="'10%'">
        <span>用户名称</span>
      </th>
      <th [nzWidth]="'10%'">
        <span>用户角色</span>
        <nzi-help [options]="{'title': '<p>数据源用户：拥有写入数据点的权限</p><p>应用用户：拥有写入以及读取数据点的权限</p><p>管理用户：拥有写入、读取数据以及新建、删除以及修改用户的权限</p>'}"></nzi-help>
      </th>
      <th [nzWidth]="'15%'">
        <span>上次编辑时间</span>
      </th>
      <th [nzWidth]="'15%'">
        <span>创建时间</span>
      </th>
      <th [nzWidth]="'15%'">
        <span>操作</span>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of nzTable.data">
      <td>{{data.name}}</td>
      <td>{{roleTrans(data.role)}}</td>
      <td>{{data.lastUpdateTime|date:'y-MM-dd HH:mm:ss'}}</td>
      <td>{{data.createTime|date:'y-MM-dd HH:mm:ss'}}</td>
      <td  class="table-opt">
        <span *ngIf="data.name === 'root'"> 
            <a class="ant-dropdown-menu-item-disabled">编辑</a>
        </span>
        <span *ngIf="data.name !== 'root'">
            <a (click)="editUserModal(data)">编辑</a>
        </span>

        <span *ngIf="data.name === 'root'"> 
            <a class="ant-dropdown-menu-item-disabled">删除</a>
        </span>
        <span *ngIf="data.name !== 'root'">
            <a (click)="showDeleteConfirm(data)">删除</a>
        </span>

        <a (click)="resetUserPasswordModal(data)">重置密码</a>

      </td>
    </tr>
  </tbody>
</nz-table>
